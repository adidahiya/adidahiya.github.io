{"version":3,"sources":["webpack:///./src/pages/projects/code-of-music/melody-sketch.tsx","webpack:///./src/components/defaultLayout.tsx","webpack:///./src/assets/favicon-16.png","webpack:///./src/assets/favicon-32.png","webpack:///./src/assets/favicon-48.png","webpack:///./src/components/defaultLayout.module.css","webpack:///./src/components/p5Canvas.tsx","webpack:///./src/components/p5Canvas.module.css","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/_flags.js","webpack:///./node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///./node_modules/core-js/modules/es6.regexp.flags.js","webpack:///./node_modules/core-js/modules/es6.date.to-string.js"],"names":["Tone","window","require","CANVAS_HEIGHT","state","isPlaying","scale","getMinorBluesScaleWithHarmonies","octaveToFilter","synth","pattern","isPatternPlaying","handlePlayToggle","Transport","stop","_this","setState","start","sketch","p","notesInCanvas","setup","draw","noStroke","now","millis","Math","floor","map","mouseY","background","fillColor","push","x","mouseX","y","triggered","color","newNotes","_i","length","note","alpha","fill","ellipse","Object","assign","values","componentDidMount","_this2","this","bpm","value","Synth","oscillator","type","envelope","attack","decay","sustain","release","toMaster","volume","Pattern","time","triggerAttackRelease","setTimeout","Time","toMilliseconds","interval","humanize","componentWillUnmount","dispose","render","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","_components_defaultLayout__WEBPACK_IMPORTED_MODULE_11__","gatsby__WEBPACK_IMPORTED_MODULE_9__","to","href","onClick","style","marginBottom","join","_components_p5Canvas__WEBPACK_IMPORTED_MODULE_12__","width","height","React","PureComponent","minorBluesScale","octave","toString","reduce","harmonies","concat","Frequency","harmonize","freq","toNote","filter","octavePlusOne","indexOf","Header","react__WEBPACK_IMPORTED_MODULE_4___default","className","styles","header","gatsby__WEBPACK_IMPORTED_MODULE_3__","META_TAGS","name","content","META_TAGS_WITH_REDIRECT","http-equiv","LINK_TAGS","favicon16","rel","sizes","favicon32","favicon48","gtag","_len","arguments","args","Array","_key","dataLayer","shouldRenderAnalytics","location","Date","_reach_router__WEBPACK_IMPORTED_MODULE_2__","_ref","isLegacyRoute","pathname","childContentsWithHeader","Fragment","body","props","children","redirectNotice","react_helmet__WEBPACK_IMPORTED_MODULE_5___default","title","link","meta","async","src","hostname","Component","module","exports","P5Canvas","_React$Component","call","apply","containerEl","instance","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_proto","prototype","_this$props","p5","oldSetup","createCanvas","autoFocus","focus","_this3","_this$props2","react__WEBPACK_IMPORTED_MODULE_2___default","processingSketch","ref","r","defaultProps","$export","__webpack_require__","P","toObject","toAbsoluteIndex","toLength","O","aLen","index","undefined","end","endPos","anObject","that","result","global","ignoreCase","multiline","unicode","sticky","$flags","DESCRIPTORS","$toString","define","fn","RegExp","source","flags","R","f","configurable","get","DateProto","getTime","NaN"],"mappings":"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","file":"component---src-pages-projects-code-of-music-melody-sketch-tsx-e3321ad5c5ac64ac99cd.js","sourcesContent":["import { Link } from \"gatsby\";\nimport p5 from \"p5\";\nimport React from \"react\";\nimport DefaultLayout from \"../../../components/defaultLayout\";\nimport { P5Canvas } from \"../../../components/p5Canvas\";\n\nlet Tone: any;\nif (typeof window !== \"undefined\") {\n    Tone = require(\"tone\");\n}\n\nconst CANVAS_WIDTH = 888;\nconst CANVAS_HEIGHT = 400;\n\nexport default class extends React.PureComponent<\n    {},\n    { isPlaying: boolean; scale: string[]; octaveToFilter: number }\n> {\n    public state = {\n        isPlaying: false,\n        scale: getMinorBluesScaleWithHarmonies(),\n        octaveToFilter: 0,\n    };\n\n    private synth: any;\n    private pattern: any;\n    private isPatternPlaying = false;\n\n    public componentDidMount() {\n        Tone.Transport.bpm.value = 160;\n        this.synth = new Tone.Synth({\n            oscillator: {\n                type: \"sine\",\n            },\n            envelope: {\n                attack: 0.05,\n                decay: 0.6,\n                sustain: 1.0,\n                release: 2,\n            },\n        }).toMaster();\n        this.synth.volume.value = -10;\n\n        this.pattern = new Tone.Pattern(\n            (time: number, note: any) => {\n                this.isPatternPlaying = true;\n                this.synth.triggerAttackRelease(note, \"16t\", time);\n                setTimeout(\n                    () => (this.isPatternPlaying = false),\n                    new Tone.Time(\"16t\").toMilliseconds(),\n                );\n            },\n            this.state.scale,\n            \"randomWalk\",\n        );\n        this.pattern.interval = \"8n\";\n        this.pattern.humanize = true;\n        this.pattern.start();\n    }\n\n    public componentWillUnmount() {\n        this.pattern.stop();\n        this.pattern.dispose();\n    }\n\n    public render() {\n        return (\n            <DefaultLayout>\n                <h3>Code of Music</h3>\n                <p>\n                    Week 3 melody sketch (<Link to=\"/blog/itp/code-of-music/melody\">blog post</Link>\n                    ,{\" \"}\n                    <a href=\"https://github.com/adidahiya/adidahiya.github.io/blob/develop/src/pages/projects/code-of-music/melody-sketch.tsx\">\n                        code\n                    </a>\n                    )\n                </p>\n                <button type=\"button\" onClick={this.handlePlayToggle} style={{ marginBottom: 20 }}>\n                    {this.state.isPlaying ? \"Stop\" : \"Play\"}\n                </button>{\" \"}\n                <span>{this.state.scale.join(\" \")}</span>\n                <P5Canvas sketch={this.sketch} width={CANVAS_WIDTH} height={CANVAS_HEIGHT} />\n            </DefaultLayout>\n        );\n    }\n\n    private handlePlayToggle = () => {\n        if (Tone.Transport.state === \"started\") {\n            Tone.Transport.stop();\n            this.setState({ isPlaying: false });\n        } else {\n            Tone.Transport.start();\n            this.setState({ isPlaying: true });\n        }\n    };\n\n    private sketch = (p: p5) => {\n        let notesInCanvas: Array<{ x: number; y: number; triggered: number; color: string }> = [];\n\n        p.setup = () => {\n            // noop\n        };\n\n        p.draw = () => {\n            p.noStroke();\n\n            const now = p.millis();\n            const octaveToFilter = Math.floor(p.map(p.mouseY, 0, CANVAS_HEIGHT, 2, 6));\n            p.background(Math.floor(p.map(p.mouseY, 0, CANVAS_HEIGHT, 4, 1)) * 64);\n            let fillColor = `255, 204, 0`;\n            switch (octaveToFilter) {\n                case 3:\n                    fillColor = `224, 96, 224`;\n                    break;\n                case 4:\n                    fillColor = `96, 224, 224`;\n                    break;\n                case 5:\n                    fillColor = `224, 96, 96`;\n            }\n\n            if (Tone.Transport.state === \"started\" && this.isPatternPlaying) {\n                // create a new note\n                notesInCanvas.push({\n                    x: p.mouseX,\n                    y: p.mouseY,\n                    triggered: now,\n                    color: fillColor,\n                });\n            }\n            const newNotes: typeof notesInCanvas = [];\n            for (const note of notesInCanvas) {\n                // fade notes as they drift left\n                const alpha = p.map(now, note.triggered, now, 0, 1);\n                // console.log(now, note.triggered, alpha);\n                p.fill(`rgba(${note.color}, ${alpha})`);\n                p.ellipse(note.x, note.y, 10);\n                if (note.x !== 0) {\n                    newNotes.push({ ...note, x: note.x - 2 });\n                }\n            }\n            notesInCanvas = newNotes;\n\n            if (this.state.octaveToFilter !== octaveToFilter && this.pattern != null) {\n                const scale = getMinorBluesScaleWithHarmonies(octaveToFilter);\n                this.pattern.values = scale;\n                this.setState({ scale, octaveToFilter });\n            }\n        };\n    };\n}\n\nconst minorBluesScale = [\"C2\", \"Eb2\", \"F2\", \"Gb2\", \"G2\", \"Bb3\"];\nfunction getMinorBluesScaleWithHarmonies(octaveToFilter: number = 0) {\n    if (Tone == null) {\n        return minorBluesScale;\n    }\n\n    const octave = octaveToFilter.toString();\n\n    return minorBluesScale\n        .reduce(\n            (harmonies, note) => harmonies.concat(Tone.Frequency(note).harmonize([0, 12, 24, 36])),\n            [],\n        )\n        .map((freq: any) => freq.toNote())\n        .filter((note: string) => {\n            // console.log(note, octaveToFilter);\n            const octavePlusOne = (octaveToFilter + 1).toString();\n            return note.indexOf(octave) === -1 && note.indexOf(octavePlusOne) === -1;\n        });\n}\n","import { Location as LocationProvider } from \"@reach/router\";\nimport { Link } from \"gatsby\";\nimport React from \"react\";\nimport Helmet from \"react-helmet\";\nimport * as favicon16 from \"../assets/favicon-16.png\";\nimport * as favicon32 from \"../assets/favicon-32.png\";\nimport * as favicon48 from \"../assets/favicon-48.png\";\nimport styles from \"./defaultLayout.module.css\";\n\nconst Header = () => (\n    <div className={styles.header}>\n        <div>\n            <h1>\n                <Link to=\"/\">adi.🍕</Link>\n            </h1>\n        </div>\n    </div>\n);\n\nconst META_TAGS = [\n    { name: \"description\", content: \"Adi Dahiya's website\" },\n    { name: \"keywords\", content: \"portfolio, blog, ITP, photography, art, documentation\" },\n];\nconst META_TAGS_WITH_REDIRECT = [...META_TAGS, { \"http-equiv\": \"refresh\", content: \"0; URL='/'\" }];\n\nconst LINK_TAGS = [\n    {\n        href: favicon16,\n        rel: \"icon\",\n        sizes: \"16x16\",\n        type: \"image/png\",\n    },\n    {\n        href: favicon32,\n        rel: \"icon\",\n        sizes: \"32x32\",\n        type: \"image/png\",\n    },\n    {\n        href: favicon48,\n        rel: \"icon\",\n        sizes: \"48x48\",\n        type: \"image/png\",\n    },\n];\n\ndeclare global {\n    // tslint:disable-next-line interface-name\n    interface Window {\n        // google analytics\n        dataLayer: any;\n    }\n}\n\nexport default class extends React.Component {\n    public componentDidMount() {\n        if (this.shouldRenderAnalytics(window.location)) {\n            // google analytics snippet\n            window.dataLayer = window.dataLayer || [];\n            gtag(\"js\", new Date());\n            gtag(\"config\", \"UA-126153749-1\");\n        }\n\n        function gtag(...args: any[]) {\n            window.dataLayer.push(args);\n        }\n    }\n\n    public render() {\n        return (\n            <LocationProvider>\n                {({ location }) => {\n                    const isLegacyRoute = location.pathname.indexOf(\"/public\") === 0;\n                    const childContentsWithHeader = (\n                        <>\n                            <Header />\n                            <div className={styles.body}>{this.props.children}</div>\n                        </>\n                    );\n                    const redirectNotice = <p>Contents have moved... redirecting to root page</p>;\n\n                    return (\n                        <>\n                            <Helmet\n                                title=\"Adi Dahiya\"\n                                link={LINK_TAGS}\n                                meta={isLegacyRoute ? META_TAGS_WITH_REDIRECT : META_TAGS}\n                            />\n                            {isLegacyRoute ? redirectNotice : childContentsWithHeader}\n                            {this.shouldRenderAnalytics(location) && (\n                                <script\n                                    async={true}\n                                    src=\"https://www.googletagmanager.com/gtag/js?id=UA-126153749-1\"\n                                />\n                            )}\n                        </>\n                    );\n                }}\n            </LocationProvider>\n        );\n    }\n\n    private shouldRenderAnalytics(location: Location) {\n        return location.hostname !== \"localhost\";\n    }\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIVJREFUeNpi/P//PwMpgImBRDBQGjrBAKsUC1bRe/fuvX//HqsUI2YorV69GqJaUFAwNDQUXcd/DABUhMZABuh+AJoNNBjCVlJSArqNgB+Afj179mxYWBjEJ0Cyo6MDn5NcXFyQuWlpaWgKUDTMnDlz1apVyCJ3794F2oAswjgM0hJAgAEAatqqYsvIfaQAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOxJREFUeNrsVsENhCAQVHMN2AIt2AItaAlSArZgC5QgJWArWoKUwE1CcjF3BpaI92IfZiXuzu6MY6ydc9WT0VQPRwEoAP8GmKZJCJFU8kp6Wmvdtq21FldiSU13slIKrX0upaQO5cjRdd1xHEgYY/Qqqgb7vqOvZ4ZzDq4ybzCOozHG59u29X1PLCQBgBnwc0lXHoogL0Y+n+AWh9koupwXeuTZYF3Xj7xfS1CkjvtgGIaAs5ZluUXRr7ypUjep8p4Dfp7n+dYGgfF9RF3dhD9tMG14Phgw8r4GwNE9SnFYJERd/osKQAGo3gIMAFwJtpmrZ1aDAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVhJREFUeNrsmOGNgzAMhUl0C7ACK7ACK7ACK7ACK8AKjAAjwAgwAoxAnxoJVS1cY5tTOMn+UdFghecvfgnCbNsW3SlsdLNQQSpIBakgFaSCggia59kY0/f9XQQ1TZPnedu2F8y1iWNZliRJ9l/hbBcQAhjgieO4KAqgCk8oTdNpmhwqXAcmhEZOnoFrQIIgKSRhQVisruv2v0CVZVkwQvMzoGAfcajGcQxje7QzGvltsCxL0apJ8ILHWZuz/W8lm+EnHhci/0vcfoZB4n/LdjseCZ8f3sU4/yTh1YFFGYbhlwS2/38YNazrCmN/7RKkYVNwG8HfEqqqqq7rr2nYMAGSOnnEa2fPTKwa1f+W9+rjmYxMsv+peEhFM/xPI4ReRpOeuf3Q/yiA9mpLdfvr2e4TVP9bqttfz3afcLaH/68nhGPcx+1C/xv9xqiCVJAKUkEq6J8LeggwAO9wSX0n2nsFAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"defaultLayout-module--header--G28ik\",\"body\":\"defaultLayout-module--body--3jKPt\"};","import p5 from \"p5\";\nimport React from \"react\";\nimport styles from \"./p5Canvas.module.css\";\n\nif (typeof window !== \"undefined\") {\n    require(\"p5/lib/addons/p5.dom\");\n    require(\"p5/lib/addons/p5.sound\");\n}\n\nexport interface IP5Props {\n    /**\n     * Should the canvas element automatically get focus?\n     * @default true\n     */\n    autoFocus?: boolean;\n\n    /**\n     * Run your sketch here.\n     */\n    sketch: (p: p5) => void;\n\n    /** If both dimensions are set, a canvas will be created. */\n    width?: number;\n    height?: number;\n}\n\nexport class P5Canvas extends React.Component<IP5Props> {\n    public static defaultProps: IP5Props = {\n        autoFocus: true,\n        sketch: () => undefined,\n    };\n\n    private containerEl?: HTMLDivElement | null;\n    // @ts-ignore\n    private instance?: p5;\n\n    public componentDidMount() {\n        if (this.containerEl != null) {\n            const { width, height } = this.props;\n            this.instance = new p5((p: p5) => {\n                this.props.sketch(p);\n                if (width != null && height != null) {\n                    // inject some setup code\n                    const oldSetup = p.setup;\n                    p.setup = () => {\n                        p.createCanvas(width, height);\n                        oldSetup();\n                    };\n                }\n            }, this.containerEl);\n            if (this.props.autoFocus) {\n                this.containerEl.focus();\n            }\n        }\n    }\n\n    public render() {\n        const { width, height } = this.props;\n        return (\n            <div\n                className={styles.processingSketch}\n                ref={r => (this.containerEl = r)}\n                style={{ width, height }}\n            />\n        );\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"processingSketch\":\"p5Canvas-module--processingSketch--1RPUV\"};","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","var DateProto = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar $toString = DateProto[TO_STRING];\nvar getTime = DateProto.getTime;\nif (new Date(NaN) + '' != INVALID_DATE) {\n  require('./_redefine')(DateProto, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n"],"sourceRoot":""}