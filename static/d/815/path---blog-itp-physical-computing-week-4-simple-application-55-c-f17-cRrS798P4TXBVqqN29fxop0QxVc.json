{"data":{"markdownRemark":{"html":"<h3>Idea</h3>\n<p>So far, we've covered the following in the class labs:</p>\n<ul>\n<li>Series and parallel circuits</li>\n<li>LEDs, resistors, variable resistors</li>\n<li>Arduino digital I/O</li>\n<li>Arduino analog I/O</li>\n<li>Audio output with a piezo speaker</li>\n<li>Servo motor control</li>\n</ul>\n<p>While browsing the ER parts list, I noticed some IR &#x26; ultrasonic distance sensors.\nSo, came up with a plan to make a simple <a href=\"https://en.wikipedia.org/wiki/Theremin\">theremin</a> using these sensors and a speaker.</p>\n<p>Here's my initial quick sketch of the device:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-b7915.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 88.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHv4SG1BQAf/8QAGBAAAgMAAAAAAAAAAAAAAAAAARECECD/2gAIAQEAAQUCuTQef//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABgQAAIDAAAAAAAAAAAAAAAAAAABECAh/9oACAEBAAY/Apwdf//EABsQAQEAAQUAAAAAAAAAAAAAAAERABAgIUGh/9oACAEBAAE/IcK3qOioBxs8YWc7P//aAAwDAQACAAMAAAAQcMAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAIVEgQWH/2gAIAQEAAT8Qye1CAkbghFX65lC7nGYAItrv3muCPh//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-sketch\"\n        title=\"\"\n        src=\"/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-d8a26.jpg\"\n        srcset=\"/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-8b83c.jpg 222w,\n/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-80e58.jpg 444w,\n/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-d8a26.jpg 888w,\n/static/theremin-sketch-c2a3116b6dc471912bf5e2a1c5f25ee2-b7915.jpg 1200w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>And here's my initial circuit diagram (digital input from the rangefinders and digital output to the speaker):</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-b7915.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 95.58333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe0rCkjZDAf/xAAWEAADAAAAAAAAAAAAAAAAAAABECD/2gAIAQEAAQUCsr//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAaEAEAAwADAAAAAAAAAAAAAAABABARITFh/9oACAEBAAE/IVgvkGnDlm10r//aAAwDAQACAAMAAAAQ0AcA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBAAAgIDAQEAAAAAAAAAAAAAAAERITFRkRBB/9oACAEBAAE/EEJuH1j+X2UXkiXI61BVKRfWxFoPfn//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-circuit\"\n        title=\"\"\n        src=\"/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-d8a26.jpg\"\n        srcset=\"/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-8b83c.jpg 222w,\n/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-80e58.jpg 444w,\n/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-d8a26.jpg 888w,\n/static/theremin-circuit-c7841e332d009b39e731283094ea63e1-b7915.jpg 1200w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3>Execution</h3>\n<p>While building the theremin, I decided to change its design to be more compact and portable.\nIt was pretty simple to hook up a 9V battery to the Arduino to allow the device to be portable after uploading my code via the USB cable.\nAfter I got the basic instrument features working, I added a switch to toggle the instrument on / off (the Arduino and the overall circuit still stay on all the time, though, since there is no switch for the battery voltage going into the microcontroller).\nI also added an LED in parallel with the speaker to give rudimentary visual feedback on the operation of the theremin.\nThe LED pulse &#x26; brightness changes with the same pattern as the speaker.\nFinally, I created a basic cardboard enclosure for the circuit, battery, and speaker.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-121bb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAMBAv/aAAwDAQACEAMQAAABSzLc0oEM3//EABoQAAMAAwEAAAAAAAAAAAAAAAACEQEDEiP/2gAIAQEAAQUCXHTeeotGStyQ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERAhASIf/aAAgBAQAGPwLmqkb6yKJnuv/EABsQAQACAgMAAAAAAAAAAAAAAAEAETFRECFB/9oACAEBAAE/IaMAtsvELOiebq4wpiCW1bw//9oADAMBAAIAAwAAABCTP//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxDVn//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPxCBf//EABoQAQEAAwEBAAAAAAAAAAAAAAERADHRIXH/2gAIAQEAAT8QbXQkr3G+AUPn25vEKAPQBAwBS7VkmciL5hBJrP/Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-1\"\n        title=\"\"\n        src=\"/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-d8a26.jpg\"\n        srcset=\"/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-8b83c.jpg 222w,\n/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-80e58.jpg 444w,\n/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-d8a26.jpg 888w,\n/static/theremin-1-e457efcb7b190d93ac652d3fd8ec825a-121bb.jpg 1280w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-121bb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAGeLJVg6R//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIREiH/2gAIAQEAAQUCzx0lREcNPJ//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgISL/2gAIAQEABj8COwdN1//EABsQAAICAwEAAAAAAAAAAAAAAAERITEAEEFR/9oACAEBAAE/ITSOoh4woFDoxQcYlJoc91//2gAMAwEAAgADAAAAEJsf/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARQf/aAAgBAwEBPxA3F//EABYRAAMAAAAAAAAAAAAAAAAAAAEQYf/aAAgBAgEBPxAVf//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQVGB/9oACAEBAAE/EBUMFqWMO1SBlp2zp9jICwWtoGXrDUAa9vmOnZ//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-2\"\n        title=\"\"\n        src=\"/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-d8a26.jpg\"\n        srcset=\"/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-8b83c.jpg 222w,\n/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-80e58.jpg 444w,\n/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-d8a26.jpg 888w,\n/static/theremin-2-c59a7ba4c20753c9d5a1b39a653d9105-121bb.jpg 1280w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-121bb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGQjzsLNJ//xAAZEAADAQEBAAAAAAAAAAAAAAABAgMAEQT/2gAIAQEAAQUCnNyCrcNX6KFMfQSu/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8BR//EABwQAAMAAQUAAAAAAAAAAAAAAAABETECEBJRkf/aAAgBAQAGPwKvV4i3HaMkZxm3/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8hEs9IF2HYouXGD5K2xL1GbwtNVi2rxs//2gAMAwEAAgADAAAAEBff/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQMBAT8Q07Fbyf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAITH/2gAIAQIBAT8Qx5BP/8QAHBABAQACAwEBAAAAAAAAAAAAAREAQSExYXGR/9oACAEBAAE/EEk0aY8eOLyQLxJoEWYIg16Kn7gASRCdvzcyDI44gbryYjw1U7z/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-3\"\n        title=\"\"\n        src=\"/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-d8a26.jpg\"\n        srcset=\"/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-8b83c.jpg 222w,\n/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-80e58.jpg 444w,\n/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-d8a26.jpg 888w,\n/static/theremin-3-c6a50c56a0e6466ce9097ae22eeaea58-121bb.jpg 1280w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here is are some short video clips of it in use:</p>\n<iframe src=\"https://player.vimeo.com/video/293751378\" width=\"640\" height=\"360\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n<iframe src=\"https://player.vimeo.com/video/293751401\" width=\"640\" height=\"360\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n<p>The final circuit diagram ended up looking like this:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-121bb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 888px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 72.578125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2lgof//EABYQAQEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQJEx//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAABITEQEUH/2gAIAQEAAT8hZZSUJ5oUvH//2gAMAwEAAgADAAAAEJMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgMBAQEAAAAAAAAAAAAAAREAITFRQWH/2gAIAQEAAT8QNVV88mpiFyNoQ2rY24TARmxD7P/Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"theremin-circuit-final\"\n        title=\"\"\n        src=\"/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-d8a26.jpg\"\n        srcset=\"/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-8b83c.jpg 222w,\n/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-80e58.jpg 444w,\n/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-d8a26.jpg 888w,\n/static/theremin-circuit-final-ddfe9eecc4f3df56fc5da8b79dd9d65d-121bb.jpg 1280w\"\n        sizes=\"(max-width: 888px) 100vw, 888px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Using the rangefinders was relatively straightforward after consulting <a href=\"http://www.circuitbasics.com/how-to-set-up-an-ultrasonic-range-finder-on-an-arduino/\">this tutorial</a>. You initiate the sensor by sending a 2 microsecond \"pulse\" (switch from HIGH→LOW signal) on the Trigger pin. In my circuit, I wanted to activate both sensors simultaneously, so I used the same output pin for both rangefinders. Distance readings come back on the Echo pin of the sensor and can be read with the built-in function <code>pulseIn()</code>.</p>\n<p>One tricky part of this project was achieving tone and volume modulation of the speaker. Arduino's built-in functions for <code>tone()</code> don't support volume modulation, so I found a small library that manages to do this called <a href=\"https://bitbucket.org/teckel12/arduino-toneac/wiki/Home\">toneAC</a>. This library requires use of digital pins 9 and 10 on the Arduino UNO, which explains part of the circuit layout. The API of the library is pretty simple (I used 3 out of the 4 argument options):</p>\n<pre><code class=\"language-c\">toneAC(frequency, volume, length);\n</code></pre>\n<h3>Code</h3>\n<pre><code class=\"language-c\">#include &#x3C;toneAC.h>\n\nint trigPin = 5;\nint echo1Pin = 6;\nint echo2Pin = 11;\nint switchPin = 2;\n\nvoid setup() {\n    Serial.begin(9600);\n    pinMode(trigPin, OUTPUT);\n    pinMode(echo1Pin, INPUT);\n    pinMode(echo2Pin, INPUT);\n    pinMode(switchPin, INPUT);\n}\n\nvoid loop() {\n    float duration1, distance1, duration2, distance2;\n\n    // send a 2 microsecond pulse to start the rangefinders\n    digitalWrite(trigPin, LOW);\n    delayMicroseconds(2);\n    digitalWrite(trigPin, HIGH);\n    delayMicroseconds(10);\n    digitalWrite(trigPin, LOW);\n\n    // read from the rangefinders\n    duration1 = pulseIn(echo1Pin, HIGH);\n    duration2 = pulseIn(echo2Pin, HIGH);\n\n    // map range 1 to tone frequency\n    float toneFrequency = map(duration1, 100, 250, 100, 4000);\n    // map range 2 to tone volume\n    float toneVolume = map(duration2, 1200, 100, 0, 10);\n\n    // occasionally print sensor values &#x26; mapped variables\n    if (millis() % 3 == 0) {\n        Serial.print(\"d1/d2: \");\n        Serial.print(duration1);\n        Serial.print(\", \");\n        Serial.print(duration2);\n        Serial.print(\"  ....   freq/vol: \");\n        Serial.print(toneFrequency);\n        Serial.print(\", \");\n        Serial.print(toneVolume);\n        Serial.println(\"\");\n    }\n\n    if (digitalRead(switchPin) == HIGH) {\n      toneAC(toneFrequency, toneVolume, 50);\n      delay(1);\n    }\n}\n</code></pre>\n<h3>Future improvements</h3>\n<p>I used a very basic algorithm for generating tones in this project. In the future, I would like to experiment with other approaches besides a simple <code>map()</code>—I think the instrument could produce a more stable and nice sound if it was more tolerant of small changes in its detected range in each rangefinder. I could achieve this by manually mapping a fixed set of distance ranges to a predetermined range of notes on the chromatic scale.</p>","frontmatter":{"date":"02 October, 2018","title":"Week 4 - simple application"},"fields":{"category":"physical-computing","slug":"/blog/itp/physical-computing/week-4-simple-application/"}}},"pageContext":{"slug":"/blog/itp/physical-computing/week-4-simple-application/"}}